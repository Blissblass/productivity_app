(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{74:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var s=n(8),c=n(13),r=n.n(c),a=n(15),i=n(6),o=(n(74),n(1)),l=Object(o.createContext)(null),j=n(21),d=n(2);var b=function(){var e=Object(o.useContext)(l).user;return Object(d.jsxs)("div",{className:"container text-center mt-5",children:[Object(d.jsx)("h1",{className:"mt-4",style:{fontSize:55},children:"Welcome to Task.io! "}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"display-5 mt-5",children:"Gain control today."}),Object(d.jsx)(a.b,{to:"/user/".concat(e.id),children:Object(d.jsxs)("button",{type:"button",className:"btn btn-primary btn-lg w-50 mt-3 text-white p-2",children:["View your schedule ",Object(d.jsx)(j.c,{className:"mb-1 ms-1"})]})})]})]})},u=n(44),m=function(e){var t=e.user,n=e.setUser;return Object(d.jsxs)("div",{className:"w-100 d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{children:Object(d.jsx)(a.b,{to:"/",children:Object(d.jsxs)("div",{className:"d-flex align-items-center",children:[Object(d.jsx)("h2",{className:"navbar-brand m-1 ms-3",style:{fontSize:30},children:"Task.io"}),Object(d.jsx)(u.a,{className:"text-white ms-1",style:{fontSize:30}})]})})}),Object(d.jsxs)("div",{className:"d-flex algin-items-center",children:[Object(d.jsx)(a.b,{to:"/user/".concat(t.id),children:Object(d.jsx)("h3",{className:"text-white m-1 ms-3",children:t.username})}),Object(d.jsx)(a.b,{to:"/login",onClick:function(){n(null),localStorage.removeItem("taskio-user")},children:Object(d.jsx)("h3",{className:"text-white m-1 ms-5 me-4",children:"Log Out"})})]})]})},h=function(){return Object(d.jsxs)("div",{className:"w-100 d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{children:Object(d.jsx)(a.b,{to:"/",children:Object(d.jsxs)("div",{className:"d-flex align-items-center",children:[Object(d.jsx)("h2",{className:"navbar-brand m-1 ms-3",style:{fontSize:30},children:"Task.io"}),Object(d.jsx)(u.a,{className:"text-white ms-1",style:{fontSize:30}})]})})}),Object(d.jsxs)("div",{className:"d-flex algin-items-center",children:[Object(d.jsx)(a.b,{to:"/login",children:Object(d.jsx)("h3",{className:"text-white m-1 ms-3",children:"Login"})}),Object(d.jsx)(a.b,{to:"/signUp",children:Object(d.jsx)("h3",{className:"text-white m-1 ms-5 me-4",children:"Sign Up"})})]})]})},O=function(e){var t=Object(o.useContext)(l),n=t.user,s=t.setUser;return Object(d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:n?Object(d.jsx)(m,{user:n,setUser:s}):Object(d.jsx)(h,{})})},x=n(9),p=Object(o.createContext)(null),f=function(e){var t=Object(o.useContext)(l).setUser,n=Object(o.useContext)(p).setErrors;return Object(d.jsxs)("div",{className:"card w-50 text-center mx-auto mt-5",children:[Object(d.jsx)("h3",{className:"p-3",children:"Join Task.io today!"}),Object(d.jsxs)("form",{className:"p-3 pt-1",onSubmit:function(e){e.preventDefault();var s=Object(x.a)(e.currentTarget.children).map((function(e){return e.value})),c={user:{username:s[0],email:s[1],password:s[2],password_confirmation:s[3]}};fetch("https://taskio-backend.herokuapp.com/users",{method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){if(e.errors){var s=function(t){n((function(n){return[].concat(Object(x.a)(n),["".concat(t," ").concat(e.errors[t])])}))};for(var c in e.errors)s(c)}else localStorage.setItem("taskio-user",JSON.stringify(e)),t(e)}))},children:[Object(d.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Username..."}),Object(d.jsx)("input",{type:"text",className:"form-control form-control-lg mt-3",placeholder:"E-Mail..."}),Object(d.jsx)("input",{type:"password",className:"form-control form-control-lg mt-3",placeholder:"Password..."}),Object(d.jsx)("input",{type:"password",className:"form-control form-control-lg mt-3",placeholder:"Password Confirmation..."}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg text-white mt-3 w-50",children:"Sign Up"})]})]})},v=function(e){var t=Object(o.useContext)(l).setUser,n=Object(o.useContext)(p).setErrors;return Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"card w-50 text-center mx-auto mt-5",children:[Object(d.jsx)("h3",{className:"p-3",children:"Log in to an existing account"}),Object(d.jsxs)("form",{className:"p-3 pt-1",onSubmit:function(e){e.preventDefault();var s=Object(x.a)(e.currentTarget.children).map((function(e){return e.value})),c={user:{email:s[0],password:s[1]}};fetch("https://taskio-backend.herokuapp.com/users/sign_in",{method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){e.error?n((function(t){return[].concat(Object(x.a)(t),[e.error])})):(localStorage.setItem("taskio-user",JSON.stringify(e)),t(e))}))},children:[Object(d.jsx)("input",{type:"text",className:"form-control form-control-lg mt-3",placeholder:"E-Mail...",required:!0}),Object(d.jsx)("input",{type:"password",className:"form-control form-control-lg mt-3",placeholder:"Password..."}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg text-white mt-3 w-50",children:"Log In"})]})]})})},y=function(e){return Object(o.useContext)(l).user?e.element:Object(d.jsx)(i.a,{to:"/login "})},g=function(e){return Object(o.useContext)(l).user?Object(d.jsx)(i.a,{to:"/"}):e.element},N=function(e){var t=Object(o.useContext)(l).user,n=Object(i.h)();return t?t.id===parseInt(n.id)?e.element:Object(d.jsx)(i.a,{to:"/"}):Object(d.jsx)(i.a,{to:"/login"})},k=n(60),w=n(59),S=function(e){var t=e.item,n=e.setUserLists,c=Object(o.useState)(!1),r=Object(s.a)(c,2),i=r[0],l=r[1],b=Object(o.useState)(t.name),u=Object(s.a)(b,2),m=u[0],h=u[1];return Object(d.jsx)("div",{className:"mt-3",children:Object(d.jsx)("div",{className:"card w-50 mx-auto",children:Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsxs)("div",{className:"ms-3 mt-2 d-flex align-items-center",children:[Object(d.jsxs)(a.b,{to:"list/".concat(t.id),className:"d-flex align-items-center",children:[Object(d.jsx)(j.a,{style:{fontSize:25},className:"me-2 mb-1"}),Object(d.jsx)("h3",{style:{display:i?"none":"block"},children:t.name})]}),Object(d.jsx)("input",{type:"text",className:"form-control form-control-lg mb-2",value:m,placeholder:"Name...",style:{display:i?"block":"none"},onChange:function(e){return h(e.target.value)}}),Object(d.jsx)(w.a,{className:"text-primary ms-3 mb-2",style:{fontSize:40,cursor:"pointer",display:i?"block":"none"},onClick:function(){if(m!==t.name&&m.length){var e={to_do:{name:m}};fetch("https://taskio-backend.herokuapp.com/to_do/".concat(t.id),{method:"PATCH",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.id&&(t.name=e.name,l(!1))}))}else l(!1)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)(j.d,{className:"text-primary me-3",style:{fontSize:30,cursor:"pointer"},onClick:function(){return l((function(e){return!e}))}}),Object(d.jsx)(k.a,{className:"text-primary me-2",style:{fontSize:35,cursor:"pointer"},onClick:function(){fetch("https://taskio-backend.herokuapp.com/to_do/".concat(t.id),{method:"DELETE"}).then(n((function(e){return e.filter((function(e){return e.id!==t.id}))})))}})]})]})})})},C=function(e){return Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"button",className:"btn btn-primary btn-lg text-white position-absolute",style:{bottom:30,right:50},value:"New list",onClick:e.onClick})})},T=function(e){var t=e.lists;return Object(d.jsxs)("div",{className:"mt-4",children:[Object(d.jsx)("h1",{className:"",children:"View your lists:"}),Object(d.jsx)("div",{children:t.map((function(t){return Object(d.jsx)(S,{item:t,setUserLists:e.setUserLists},t.id)}))}),Object(d.jsx)(C,{onClick:e.handleOpen})]})},E=function(e){return Object(d.jsx)("div",{className:"mt-3",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"No To-Do's found!"}),Object(d.jsx)("input",{type:"button",className:"btn btn-primary w-25 p-2 text-white",value:"Create a list now",onClick:e.handleOpen})]})})},I=n(92),_=n(90),U=function(e){var t=e.show,n=e.setShow,s=e.setUserLists,c=Object(o.useContext)(l).user,r=Object(o.useContext)(p).setErrors,a=function(){return n(!1)};return Object(d.jsxs)(I.a,{show:t,onHide:a,className:"",centered:!0,children:[Object(d.jsx)(I.a.Header,{closeButton:!0,children:Object(d.jsx)(I.a.Title,{children:"Create a new To-Do"})}),Object(d.jsxs)(I.a.Body,{children:[Object(d.jsx)("p",{className:"mb-2",children:"Pick a name for your list:"}),Object(d.jsx)("form",{id:"listForm",onSubmit:function(e){e.preventDefault();var t={to_do:{name:e.target.children[0].value,user_id:c.id}};fetch("https://taskio-backend.herokuapp.com/to_do",{method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.id?(e.target.children[0].value=null,s((function(e){return[].concat(Object(x.a)(e),[t])})),a()):(a(),t.forEach((function(e){return r((function(t){return[].concat(Object(x.a)(t),[e])}))})))}))},children:Object(d.jsx)("input",{type:"text",className:"form-control",placeholder:"Name..."})})]}),Object(d.jsxs)(I.a.Footer,{children:[Object(d.jsx)(_.a,{variant:"secondary",onClick:a,children:"Close"}),Object(d.jsx)(_.a,{type:"submit",className:"text-white",variant:"primary",form:"listForm",children:"Submit"})]})]})},P=function(){var e=Object(i.h)(),t=Object(o.useState)(!0),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)([]),j=Object(s.a)(a,2),b=j[0],u=j[1],m=Object(o.useState)(!1),h=Object(s.a)(m,2),O=h[0],x=h[1],p=Object(o.useContext)(l).user,f=function(){return x(!0)};return Object(o.useEffect)((function(){fetch("https://taskio-backend.herokuapp.com/api/user_lists/".concat(e.id)).then((function(e){return e.json()})).then((function(e){u(e),r(!1)}))}),[e]),c?Object(d.jsx)("div",{className:"spinner-border text-primary d-block mx-auto mt-4",style:{height:150,width:150}}):Object(d.jsxs)("div",{className:"container text-center",children:[Object(d.jsxs)("h1",{className:"display-3 mt-2",children:["Welcome, ",p.username,"!"]}),Object(d.jsx)("div",{children:b.length?Object(d.jsx)(T,{lists:b,handleOpen:f,setUserLists:u}):Object(d.jsx)(E,{handleOpen:f})}),Object(d.jsx)(U,{show:O,setShow:x,handleOpen:f,setUserLists:u})]})},D=n(91),L=function(e){var t=Object(o.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(d.jsx)("div",{className:"mx-auto w-75 mb-4",children:Object(d.jsx)("div",{children:Object(d.jsxs)("form",{className:"d-flex align-items-center justify-content-center",onSubmit:function(t){t.preventDefault();var n={task:{description:c,to_do_id:e.postId}};fetch("https://taskio-backend.herokuapp.com/task",{method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){e.setTaskData((function(e){return[].concat(Object(x.a)(e),[t])})),r("")}))},children:[Object(d.jsx)("input",{type:"text",className:"form-control form-control-lg w-75 me-3",placeholder:"Add a new task...",required:!0,onChange:function(e){return r(e.target.value)},value:c}),Object(d.jsx)("button",{type:"submit",style:{backgroundColor:"transparent",border:"none"},children:Object(d.jsx)(j.b,{style:{fontSize:37,cursor:"pointer"},className:"text-primary"})})]})})})},J=n(3),z=n(28),H=function(e){var t=e.task,n=e.idx,c=Object(o.useState)(t.status),r=Object(s.a)(c,2),a=r[0],i=r[1],l=function(){i((function(e){return!e})),fetch("https://taskio-backend.herokuapp.com/api/toggle_status/".concat(t.id))};return Object(d.jsx)(z.b,{draggableId:"".concat(t.id),index:n,children:function(e){return Object(d.jsx)("div",Object(J.a)(Object(J.a)(Object(J.a)({},e.dragHandleProps),e.draggableProps),{},{ref:e.innerRef,children:Object(d.jsx)("li",{className:"list-group-item list-group-item-primary m-1",onClick:l,children:a?Object(d.jsx)("h4",{className:"m-1",children:Object(d.jsx)("del",{children:t.description})}):Object(d.jsx)("h4",{className:"m-1",children:t.description})})}))}},t.id)},A=function(e){var t=e.taskData;return Object(d.jsx)(z.c,{droppableId:e.listId,children:function(e){return Object(d.jsxs)("div",Object(J.a)(Object(J.a)({},e.droppableProps),{},{ref:e.innerRef,children:[Object(d.jsx)("ul",{className:"list-group list-group-flush text-start w-50 mx-auto",children:t.map((function(e,t){return Object(d.jsx)(H,{task:e,idx:t},e.id)}))}),e.placeholder]}))}})},R=function(){return Object(d.jsx)(z.c,{droppableId:"drop-delete",children:function(e){return Object(d.jsxs)("div",Object(J.a)(Object(J.a)({className:"position-fixed bg-danger rounded pt-1",style:{right:40,bottom:40,height:100,width:100}},e.droppableProps),{},{ref:e.innerRef,children:[Object(d.jsx)(j.e,{className:"text-white mt-4",style:{fontSize:45}}),e.placeholder]}))}})},B=function(){var e=Object(i.h)(),t=Object(o.useState)({}),n=Object(s.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)([]),l=Object(s.a)(a,2),j=l[0],b=l[1],u=Object(o.useState)(!0),m=Object(s.a)(u,2),h=m[0],O=m[1],p=Object(o.useRef)();Object(o.useEffect)((function(){fetch("https://taskio-backend.herokuapp.com/api/todo/".concat(e.list_id)).then((function(e){return e.json()})).then((function(e){r(e.list),b(e.tasks),O(!1)}))}),[e]),Object(o.useEffect)((function(){p.current=j}),[j]),Object(o.useLayoutEffect)((function(){return function(){f()}}),[]),window.onbeforeunload=function(){f()};var f=function(){var e={};p.current.forEach((function(t){return e[t.id]={index:p.current.indexOf(t)}})),fetch("https://taskio-backend.herokuapp.com/api/reorder_list",{method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({to_do:{orderData:e}})})};return Object(d.jsx)("div",{children:h?Object(d.jsx)("div",{className:"spinner-border text-primary d-block mx-auto mt-4",style:{height:150,width:150}}):Object(d.jsxs)("div",{className:"container text-center mt-3",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:Object(d.jsx)(D.a,{children:"*".concat(c.name,"*")})}),Object(d.jsx)(D.a,{className:"text-primary",children:"---"})]}),Object(d.jsx)(L,{postId:e.list_id,setTaskData:b}),j.length?Object(d.jsx)("div",{children:Object(d.jsxs)(z.a,{onDragEnd:function(e){var t=e.destination,n=e.source,s=e.draggableId,c=Object(x.a)(j);if(t&&(t.index!==n.index||"drop-delete"===t.droppableId)){if("drop-delete"===t.droppableId)return b((function(e){return e.filter((function(e){return e.id!==parseInt(s)}))})),void fetch("https://taskio-backend.herokuapp.com/task/".concat(s),{method:"DELETE"});c.splice(n.index,1),c.splice(t.index,0,j.find((function(e){return e.id===parseInt(s)}))),b(c)}},children:[Object(d.jsx)(A,{taskData:j,listId:e.list_id}),Object(d.jsx)(R,{})]})}):Object(d.jsx)("h1",{className:"mt-3",children:Object(d.jsx)("em",{children:"No tasks found!"})})]})})},F=n(93),q=function(e){var t=Object(o.useState)(!0),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(d.jsx)(F.a,{variant:"danger",show:c,style:{width:300},onClose:function(){return r(!1)},dismissible:!0,children:e.error})},M=function(){var e=Object(o.useContext)(p).errors;return Object(d.jsx)("div",{className:"position-absolute bottom-0 ms-3",children:e.map((function(e,t){return Object(d.jsx)(q,{error:e},t)}))})},V=function(){var e=Object(o.useState)(JSON.parse(localStorage.getItem("taskio-user"))),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)([]),j=Object(s.a)(r,2),u=j[0],m=j[1];return Object(d.jsx)("div",{children:Object(d.jsx)(a.a,{children:Object(d.jsx)(l.Provider,{value:{user:n,setUser:c},children:Object(d.jsxs)(p.Provider,{value:{errors:u,setErrors:m},children:[Object(d.jsx)(O,{}),Object(d.jsx)(M,{}),Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{exact:!0,path:"/",element:Object(d.jsx)(y,{element:Object(d.jsx)(b,{})})}),Object(d.jsx)(i.b,{exact:!0,path:"/login",element:Object(d.jsx)(g,{element:Object(d.jsx)(v,{})})}),Object(d.jsx)(i.b,{exact:!0,path:"/signUp",element:Object(d.jsx)(g,{element:Object(d.jsx)(f,{})})}),Object(d.jsx)(i.b,{exact:!0,path:"/user/:id",element:Object(d.jsx)(N,{element:Object(d.jsx)(P,{})})}),Object(d.jsx)(i.b,{exact:!0,path:"/user/:id/list/:list_id",element:Object(d.jsx)(N,{element:Object(d.jsx)(B,{})})})]})]})})})})};r.a.render(Object(d.jsx)(V,{}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.941d8bd4.chunk.js.map